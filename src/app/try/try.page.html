<ion-header>
  <ion-toolbar>
    <ion-title>try</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
    <form
    [formGroup]="form"
    (ngSubmit)="manage(form.value)">
     <ion-list
        margin-bottom>
       <ion-item
          margin-bottom
          no-lines>
          <ion-label floating>Framework name:</ion-label>

          <!-- Assign our first FormControl of name to the input field -->
          <ion-input
             type="text"
             maxlength="40"
             formControlName="name"></ion-input>
          <span>Please enter a framework name of no more than 40 characters</span>
       </ion-item>


       <!-- Assign the technologies FormArray to the form
            where we want to track/generate new input track fields -->
     <div
        formArrayName="technologies"
        margin-bottom>
          <!-- Assign a FormGroupName property binding to track
               and manage each separate generated input field.
               Also iterate through the technologies FormArray to
               correctly track/render new input fields against
               existing fields -->
          <section
             [formGroupName]="i"
             *ngFor="let tech of form.controls.technologies.controls; let i = index">
             <ion-item-group>
                 <ion-item-divider color="light">Name #{{ i + 1 }}</ion-item-divider>
                <ion-item>
                   <ion-label floating>Technology name:</ion-label>
                   <ion-input
                      type="text"
                      maxlength="50"
                      formControlName="name"></ion-input>
                </ion-item>

                <!-- Allow generated input field to be removed -->
                <span
                   float-right
                   ion-button
                   icon-left
                   clear
                   *ngIf="form.controls.technologies.length > 1"
                   (click)="removeInputField(i)">
                   <ion-icon name="close"></ion-icon>
                   Remove
                </span>
             </ion-item-group>
          </section>
       </div>
       <!-- Allow new input field to be generated/added -->
       <span>
          <ion-button (click)="addNewInputField()">
             <ion-icon name="add"></ion-icon>
             Add a new technology
          </ion-button>
       </span>
    </ion-list>

    <!-- Only allow form to be submitted IF validation criteria for
            input fields has been successfully passed -->
       <button [disabled]="!form.valid">Submit</button>
 </form>

</ion-content>
